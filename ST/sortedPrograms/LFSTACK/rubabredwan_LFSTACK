/*********************************
*   Bismillahir Rahmanir Rahim   *
*********************************/

#include <bits/stdc++.h>

#define rep(i, n)	for(int i=0;i<n;i++)
#define repn(i, n)	for(int i=1;i<=n;i++)
#define set(i, n)	memset(i, n, sizeof(i))

#define mx			100007
#define eps			1e-9
#define inf			1e9
#define mod			1000000007
#define pi			acos(-1)
#define pb			push_back

using namespace std;

typedef long long ll;
typedef pair<int, int> pii;

int main(){
	int tc, n;
	cin >> tc;
	while(tc--){
		cin >> n;
		vector<int>vec;
		int f, x;
		cin >> f;
		rep(i, f){
			cin >> x;
			vec.pb(x);
		}
		vector<int>sec;
		reverse(vec.begin(), vec.end());
		rep(i, f){
			cin >> x;
			sec.pb(x);
		}
		if(vec == sec) cout << "Yes\n";
		else cout << "No\n";
	}


	return 0;
}

